# Party Animals 钓鱼脚本

> 纯像素判定 + SendInput 双通道点击，兼容性高；适配 1920×1080 & 100% DPI。

## 实现方式
- **抛竿**：中心点按住 0.06s。
- **调桶**：`C` 长按 + 鼠标左滑（用 pyautogui 拖动）；鱼桶可见/消失采用 4 像素点（上两黄、下两米白）**同时满足**判定。
- **咬钩**：鱼桶消失即咬钩。
- **首次收线**：以抛竿同款点击节奏点按，直到 **Z1 像素变黄**。
- **缓慢收线至中位**：**Z2 → 停 0.8s → Z3**，带 **Z1 卡死保护**（Z1 连续黄>0.7s 则松 0.5s 再继续）。
- **正式收线（计时 10s）**：
  - **0~10s（Phase A）**：Z2↔Z3 循环（放只看 Z1/Z2；收只看 Z3/Z4；Z1/Z4 边界监控）。
  - **>10s（Phase B）**：不再检测 Z2；放线触达 Z2 即“拉到 Z3→停 0.8s”循环。
  - 全程 **Z1 防卡死**：收线时 Z1 黄→松 0.5s 继续；放线时 Z1 黄→立即改为收线直达 Z3。
- **成功判定**：**拉力盘消失后固定等待 1 秒**，若出现上方**黄色提示框**（2 像素同时黄）才算**成功**；否则**空军**。
- **收鱼**：对着屏幕中心，**按住式点击**（0.08s）循环至提示框消失（最多 10 次）。
- **鱼桶将满**：默认成功收鱼16条停止脚本，可在`bf_config.py`修改`stop_after_n_success`。

## 分辨率与坐标
默认坐标基于 **1920×1080 + 100% DPI**。如果你的分辨率不同，请在`bf_config.py`中调整这些像素点：
- `tick_coords`（4 点）：张力盘四点 `Z1/Z2/Z3/Z4`
- `bucket_coords`（4 点）：鱼桶可见判定（上 2 黄、下 2 米白）
- `bucket_flag_coord`（1 点）：**(1680,821)**，用于“鱼桶将满”判定
- `banner_coords`（2 点）：上鱼黄色提示框（2 点均为黄）

## 运行环境
- Windows 
- Python 3.9+  
- `pip install opencv-python numpy pyautogui pygetwindow pywin32 keyboard pillow mss`

## 常见问题
- **点击无效**：以管理员运行；检查输入法；把 `press_hold` 提高到 0.08~0.1。
- **像素误判**：确认 DPI 100%，并校准坐标；必要时增大颜色容差或自行修改对应像素点的颜色[在线图片取色器](https://photokit.com/colors/eyedropper/?lang=zh)
- **提示框延迟**：脚本已固定等待 1 秒再判断，如仍偏慢可改成 1.2s。
## 使用
- 下载脚本压缩包并解压，在`bf_config.py`配置`stop_after_n_success`，若分辨率不为**1920×1080**则还需要校准像素坐标。
- 打开终端输入`pip install opencv-python numpy pyautogui pygetwindow pywin32 keyboard pillow mss`安装依赖。
- 进入自定义房间，**推荐自己创建房间并加锁**，来到钓点，**推荐河中间的巨石，人物不容易移动**，调出钓竿，确保鱼饵充足。
- 在脚本文件夹地址栏输入`powershell`后回车，在弹出的终端输入`python better_fisher.py`后回车，若倒计时结束后程序没有自动切换至游戏窗口请手动切换。
- 在钓到`stop_after_n_success`中配置的数量的鱼后脚本会自动退出，手动卖鱼后重新运行脚本即可。
## 校准像素坐标
- 若你的分辨率不为**1920×1080**则需要手动校准坐标，你可以使用`mark`文件夹中的`mark_points.py`进行校准。也可以手动拾取坐标。
### 手动校准像素坐标
- 按照mark文件夹中的`gauge.png` `bucket.png` `banner.png`在游戏中截取对应图片，在[在线图片坐标拾取](https://www.lddgo.net/image/coordinate-pick)中根据`example-gauge_marked.png` `example-bucket_marked.png` `example-banner_marked.png`点选对应位置坐标。
- 复制结果，在`bf_config.py`对应位置填入坐标。
### 自动校准像素坐标
- 截取对应图片后重命名替换`mark`文件夹中的`gauge.png` `bucket.png` `banner.png`图片。
- 在文件夹内使用`python mark_points.py`运行验证脚本，查看生成的`gauge_marked.png` `bucket_marked.png` `banner_marked.png`与与`example`内示例图片对比判断坐标点是否准确，若不准确则进行微调。
- 打开生成的`*_WxH.py`复制坐标后在`bf_config.py`对应位置填入坐标。
# 用户协议 & 隐私声明

> **重要提示**  
> 使用本工具即代表您已阅读并同意**猛兽派对官方《用户协议与隐私政策》**：  
> <https://partyanimals.cn/user-agreement>

## 本工具的免责声明

1. **完全离线运行**  
   本仓库提供的脚本只在本地读取/写入屏幕像素和键鼠事件，**不会上传任何截图、账号信息或系统数据**到第三方服务器。  
2. **零数据收集**  
   - 不收集、不存储、不共享您的登陆凭据、聊天记录或游戏内资产。  
   - 不调用 Windows 日志、浏览器 Cookie、硬盘文件等与游戏无关的个人信息。  
3. **仅供个人娱乐与学习**  
   本工具属第三方开源脚本，与开发商、发行商及其合作伙伴 **无官方关联**。  
   您在使用过程中产生的任何账号风险（包括但不限于封禁、回档、数据丢失）或硬件/软件损害，**作者概不负责**。  
4. **遵守官方规则**  
   请务必遵循 <https://partyanimals.cn/user-agreement> 对外挂、自动化脚本的限定。如果官方将自动钓鱼判定为违规操作，请立即停止使用。  
5. **二次分发责任**  
   任何 fork / 打包 / 转载 / 二次开发者，必须保留本免责声明，并自行对其修改版本承担法律责任。  
6. **同意条款后再使用**  
   若您 **不同意** 以上全部条款，请删除脚本并停止使用。继续使用即视为您 **已阅读、理解并接受** 本免责声明的全部内容。

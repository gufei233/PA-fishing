# Party Animals 钓鱼脚本

> 纯像素判定 + SendInput 双通道点击，兼容性高；适配 1920×1080 & 100% DPI。

## 实现方式
- **抛竿**：中心点按住 0.06s。
- **调桶**：`C` 长按 + 鼠标左滑（用 pyautogui 拖动）；鱼桶可见/消失采用 4 像素点（上两黄、下两米白）**同时满足**判定。
- **咬钩**：鱼桶消失即咬钩。
- **触发拉力盘**：以抛竿同款点击节奏点按，直到 **Z1 像素变黄**。
- **对中**：**Z2 → 停 0.5s → Z3**，带 **Z1 卡死保护**（Z1 连续黄>0.7s 则松 0.5s 再继续）。
- **收线（计时 10s）**：
  - **0~10s（Phase A）**：Z2↔Z3 循环（放只看 Z1/Z2；收只看 Z3/Z4；Z1/Z4 越界与救援照旧）。
  - **>10s（Phase B）**：不再检测 Z2；放线触达 Z2 即“拉到 Z3→停 0.5s→松”，形成 **Z3-0.5s** 节律。
  - 全程 **Z1 防卡死**：收线时 Z1 黄→松 0.5s 继续；放线时 Z1 黄→立即改为收线直达 Z3。
- **成功判定**：**拉力盘消失后固定等待 1 秒**，若出现上方**黄色提示框**（2 像素同时黄）才算**成功**；否则**空军**。
- **收鱼**：对着屏幕中心，**按住式点击**（0.08s）循环至提示框消失（最多 10 次）。
- **鱼桶将满**：每次**调出鱼桶**后，读取 **(1680,821)**。若**不是** `#eed8a9/#eed7a8/#efd8a9` 的近邻色，则标记“**本轮若成功上鱼则停止**”；当本轮收鱼完成后，输出“鱼桶已满”并退出脚本。

## 分辨率与坐标
默认坐标基于 **1920×1080 + 100% DPI**。如果你的分辨率不同，请在代码 `CFG` 中调整这些像素点：
- `tick_coords`（4 点）：张力盘四点 `Z1/Z2/Z3/Z4`
- `bucket_coords`（4 点）：鱼桶可见判定（上 2 黄、下 2 米白）
- `bucket_flag_coord`（1 点）：**(1680,821)**，用于“鱼桶将满”判定
- `banner_coords`（2 点）：上鱼黄色提示框（2 点均为黄）
> 如果颜色偏差较大，可微调 `_near(..., tol=...)` 的容差（建议 ±10 范围内调整）。[在线图片坐标拾取](https://www.lddgo.net/image/coordinate-pick)

## 运行环境
- Windows 
- Python 3.9+  
- `pip install opencv-python numpy pyautogui pygetwindow keyboard pillow`

## 常见问题
- **点击无效**：以管理员运行；检查输入法；把 `press_hold` 提高到 0.08~0.1。
- **像素误判**：确认 DPI 100%，并校准坐标；必要时增大颜色容差。
- **提示框延迟**：脚本已固定等待 1 秒再判断，如仍偏慢可改成 1.2s。

# Party Animals 自动钓鱼脚本 (PA‑Fishing)

> **全像素判定 + SendInput 双通道点击** ，兼容性高。拥有「菜单 + 一键校准 + 悬浮日志」功能，支持 **EXE 单文件** 与源码运行。

---

## 快速开始

1. **安装依赖（源码运行）**

   ```bash
   pip install opencv-python numpy pyautogui pygetwindow pywin32 keyboard pillow mss
   ```

2. **运行脚本/EXE**

   ```bash
   # 源码
   python better_fisher.py
   ```
EXE双击即可

3. **菜单选项**

   | 选项                   | 用途                                |
   | -------------------- | --------------------------------- |
   | **1 校准坐标（需先打开猛兽派对）** | 自动检测窗口 ➜ 输出坐标 ➜ (可选) 生成标注图并写入配置文件 |
   | **2 开始钓鱼**           | 进入自动钓鱼逻辑（支持热键 `p / q / o`）        |
   | **3 退出脚本**           | 退出                                |

4. **推荐流程**

   1. 先选 **1 校准坐标** 并跟随提示完成截图 → 标注 → 写入配置文件。
   2. 在配置文件修改`stop_after_n_success`为你的鱼桶最大容量。
   3. 进入自定义房间并调出鱼竿。
   4. 回到菜单选 **2 开始钓鱼**。

---

## 自动校准详细步骤

1. **准备截图**：
   - `gauge.png`    → 张力盘（拉力盘）
   - `bucket.png`   → 鱼桶
   - `banner.png`   → 上鱼黄色提示框
2. 将三张图放入脚本同级目录的 `mark/` 文件夹。
3. 在菜单 **1 校准坐标** 流程中输入 `y` → 自动生成：
   - `mark/*_marked.png`    带红圈标注的对照图；
   - `mark/gauge_<WxH>.py` 等分辨率专属坐标文件。
4. 对比 `mark/example/` 示例确认无误后，再输入 `y` 写回配置文件。
5. 校准完毕后可立刻选 **2 开始钓鱼**。

> **提示**：如分辨率/窗口大小发生变化，重新执行一次校准即可。

---

## 手动校准（可选）

若无法截图/自动校准失败，可参考 `mark/example` 中的标注示例，在[在线图片坐标拾取](https://www.lddgo.net/image/coordinate-pick) 中获取坐标，然后直接修改配置文件中的 `coords`。

---

## 配置文件 `bf_config.json`

- **EXE首次运行自动生成**，存放于EXE 同目录。
- 包含 `keys / coords / timings / overlay / colors` 五大板块，详细说明参考`bf_config.py`。
- 任意字段均可在文本编辑器中调整，保存后立刻生效（无需重启脚本）。

---

## 钓鱼逻辑

- **抛竿 → 调桶 → 等咬钩 → 对中 (Z2→停→Z3) → Phase A/B 四点状态机 → 成功判定 → 收鱼**。
- 完整像素判定流程、容差与时间参数均可在配置文件的 `timings / colors` 中自定义。

详细说明见源码注释。

---

## 常见问题

| 问题      | 解决方案                                               |
| ------- | -------------------------------------------------- |
| 点击/按键无效 | 以管理员运行脚本；检查输入法；将 `cast_press_hold` 调大到 `0.08~0.1`。 |
| 像素误判    | 确认 Windows DPI=100%；重新校准；或增大颜色容差。                  |
| 黄框出现太慢  | 将 `post_tension_check_delay` 调大，例如 `1.2s`。         |
| 想隐藏日志框  | 按 `o` 切换；或在配置文件 ` overlay.alpha` 调整透明度。            |

---

## 用户协议 & 隐私声明

> **重要提示**  
> 使用本工具即代表您已阅读并同意**猛兽派对官方《用户协议与隐私政策》**：  
> <https://partyanimals.cn/user-agreement>

### 本工具的免责声明

1. **完全离线运行**  
   本仓库提供的脚本只在本地读取/写入屏幕像素和键鼠事件，**不会上传任何截图、账号信息或系统数据**到第三方服务器。  
2. **零数据收集**  
   - 不收集、不存储、不共享您的登陆凭据、聊天记录或游戏内资产。  
   - 不调用 Windows 日志、浏览器 Cookie、硬盘文件等与游戏无关的个人信息。  
3. **仅供个人娱乐与学习**  
   本工具属第三方开源脚本，与开发商、发行商及其合作伙伴 **无官方关联**。  
   您在使用过程中产生的任何账号风险（包括但不限于封禁、回档、数据丢失）或硬件/软件损害，**作者概不负责**。  
4. **遵守官方规则**  
   请务必遵循 <https://partyanimals.cn/user-agreement> 对外挂、自动化脚本的限定。如果官方将自动钓鱼判定为违规操作，请立即停止使用。  
5. **二次分发责任**  
   任何 fork / 打包 / 转载 / 二次开发者，必须保留本免责声明，并自行对其修改版本承担法律责任。  
6. **同意条款后再使用**  
   若您 **不同意** 以上全部条款，请删除脚本并停止使用。继续使用即视为您 **已阅读、理解并接受** 本免责声明的全部内容。
